# SwipeOS V4.1 - Card Create Wizard

## üöÄ Overview

SwipeOS V4.1 introduces a revolutionary card-based interface with 4-directional swipe actions and integrated Supabase database management. This version transforms the traditional wallet interface into an interactive, gesture-driven experience.

## ‚ú® Key Features

### üéØ Center Card Focus System
- **Single Card Display**: Only one card is fully visible at a time in the center
- **Smooth Transitions**: Animated card switching with 3D effects
- **Navigation Controls**: Left/right buttons and keyboard arrow support

### üîÑ 4-Directional Swipe Actions
- **Up Swipe**: Primary action (e.g., Edit Profile, New Conversation)
- **Down Swipe**: Secondary action (e.g., View Analytics, History)
- **Left Swipe**: Navigation action (e.g., Previous User, Settings)
- **Right Swipe**: Share/Export action (e.g., Share Profile, Quick Ask)

### üìä Progressive Feedback System
- **25% Threshold**: Confirmation state with visual feedback
- **50% Threshold**: Action execution with haptic feedback (mobile)
- **Visual Indicators**: Progress ring, directional arrows, and action labels
- **Confirmation Overlay**: "Release to confirm" and "Executing..." states

### üîê Secure Supabase Card (Card #5)
- **PIN Protection**: 4-digit PIN (default: 1234)
- **Security Features**: 
  - 3 failed attempts = 30-second lockout
  - PIN visibility toggle
  - Auto-submit on 4-digit entry
- **Database Access**: Full CRUD operations through MCP functions
- **Real-time Stats**: Tables, connections, storage usage

## üéÆ Card Types & Actions

### 1. Profile Card
- **Up**: Edit Profile
- **Down**: View Analytics  
- **Left**: Previous User
- **Right**: Share Profile

### 2. AI Assistant Card
- **Up**: New Conversation
- **Down**: View History
- **Left**: Settings
- **Right**: Quick Ask

### 3. Business Card
- **Up**: Call Contact
- **Down**: Send Email
- **Left**: View Details
- **Right**: Add to CRM

### 4. Settings Card
- **Up**: Backup Settings
- **Down**: Reset to Default
- **Left**: Import Config
- **Right**: Export Config

### 5. Supabase Database Card üîê
- **Up**: Query Database (List Tables)
- **Down**: Manage Tables (View Schema)
- **Left**: Security Settings (Connection Status)
- **Right**: API Access (Database Stats)

## üõ† Technical Implementation

### Core Components

#### `SwipeWizardCard`
- Wraps any card with swipe functionality
- Handles drag detection and threshold calculations
- Provides visual feedback and confirmation states
- Supports keyboard navigation (arrow keys)

#### `SupabaseCard`
- PIN-protected database access interface
- Keypad input with security features
- Real-time connection status
- Database statistics display

#### `SupabaseMCP`
- Model Control Protocol for database operations
- CRUD operations for profiles, cards, and swipe actions
- Database management functions
- Connection monitoring and statistics

### Swipe Mechanics

```typescript
// Swipe thresholds
const CONFIRMATION_THRESHOLD = 0.25; // 25% of card size
const EXECUTION_THRESHOLD = 0.5;     // 50% of card size

// Direction detection
const getSwipeDirection = (deltaX, deltaY) => {
  const absX = Math.abs(deltaX);
  const absY = Math.abs(deltaY);
  
  if (absX > absY) {
    return deltaX > 0 ? 'right' : 'left';
  } else {
    return deltaY > 0 ? 'down' : 'up';
  }
};
```

### Database Schema

```sql
-- Profiles table
CREATE TABLE profiles (
  id UUID PRIMARY KEY,
  user_name TEXT NOT NULL,
  company_name TEXT,
  avatar_url TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Cards table
CREATE TABLE cards (
  id UUID PRIMARY KEY,
  type TEXT NOT NULL,
  title TEXT NOT NULL,
  data JSONB,
  user_id UUID REFERENCES profiles(id),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Swipe actions table
CREATE TABLE swipe_actions (
  id UUID PRIMARY KEY,
  card_id UUID REFERENCES cards(id),
  direction TEXT NOT NULL,
  label TEXT NOT NULL,
  action_type TEXT NOT NULL,
  action_data JSONB,
  created_at TIMESTAMP DEFAULT NOW()
);
```

## üöÄ Getting Started

### Prerequisites
- Node.js 18+
- npm or yarn
- Supabase account (optional for full functionality)

### Installation

1. **Clone the repository**
   ```bash
   git clone https://github.com/CVO-TreeAi/SwipeOsTreeAI.git
   cd SwipeOsTreeAI
   ```

2. **Install dependencies**
   ```bash
   npm install
   ```

3. **Configure environment** (optional)
   ```bash
   cp .env.local.example .env.local
   # Edit .env.local with your Supabase credentials
   ```

4. **Start development server**
   ```bash
   npm run dev
   ```

5. **Open V4.1**
   Navigate to `http://localhost:3000/v4`

### Supabase Setup (Optional)

1. Create a new Supabase project
2. Run the database schema (see above)
3. Get your project URL and anon key
4. Update `.env.local` with your credentials

## üéØ Usage Guide

### Basic Navigation
- **Mouse/Trackpad**: Click and drag cards in any direction
- **Keyboard**: Use arrow keys for instant actions
- **Mobile**: Touch and drag with haptic feedback

### Swipe Actions
1. **Start Drag**: Click/touch and hold the center card
2. **Confirmation**: Drag 25% of card size to see confirmation
3. **Execute**: Drag 50% of card size to execute action
4. **Cancel**: Release before 25% threshold to cancel

### Supabase Card Access
1. Navigate to the Supabase card (card 5 of 5)
2. Enter PIN: `1234` (default)
3. Access database functions via swipe actions
4. Lock card when finished for security

### Keyboard Shortcuts
- **Arrow Up**: Execute up action on current card
- **Arrow Down**: Execute down action on current card
- **Arrow Left**: Execute left action on current card
- **Arrow Right**: Execute right action on current card

## üîß Customization

### Adding New Cards
```typescript
const newCard: V4Card = {
  id: 'custom-1',
  type: 'custom',
  title: 'Custom Card',
  component: <CustomCardComponent theme={theme} />,
  actions: [
    {
      direction: 'up',
      label: 'Custom Action',
      icon: <CustomIcon size={20} />,
      color: 'bg-custom-500',
      action: async () => {
        // Custom action implementation
      }
    }
    // ... more actions
  ]
};
```

### Modifying Swipe Thresholds
```typescript
// In SwipeWizardCard component
const CONFIRMATION_THRESHOLD = 0.3; // 30% instead of 25%
const EXECUTION_THRESHOLD = 0.6;    // 60% instead of 50%
```

### Custom PIN for Supabase Card
```typescript
<SupabaseCard
  theme={theme}
  isLocked={true}
  pin="9876" // Custom PIN
/>
```

## üêõ Troubleshooting

### Common Issues

1. **Cards not responding to swipes**
   - Check if `framer-motion` is properly installed
   - Ensure the card is in the center position
   - Verify touch-action CSS is not blocking gestures

2. **Supabase connection errors**
   - Verify environment variables are set correctly
   - Check Supabase project status
   - Ensure RLS policies allow access

3. **PIN not working**
   - Default PIN is `1234`
   - Check console for error messages
   - Verify PIN prop is passed correctly

### Debug Mode
Enable debug logging by adding to your environment:
```bash
NEXT_PUBLIC_DEBUG=true
```

## üöß Roadmap

### V4.2 Planned Features
- [ ] Custom swipe action editor
- [ ] Multi-card selection mode
- [ ] Voice command integration
- [ ] Advanced database query builder
- [ ] Card templates and themes
- [ ] Export/import card configurations
- [ ] Real-time collaboration features

### V5.0 Vision
- [ ] AI-powered action suggestions
- [ ] Gesture learning and adaptation
- [ ] Cross-device synchronization
- [ ] Plugin architecture
- [ ] Advanced analytics dashboard

## üìÑ License

This project is part of the TreeAi ecosystem and follows the same licensing terms.

## ü§ù Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests for new functionality
5. Submit a pull request

## üìû Support

For issues and questions:
- GitHub Issues: [SwipeOsTreeAI Issues](https://github.com/CVO-TreeAi/SwipeOsTreeAI/issues)
- Documentation: [TreeAi Docs](https://docs.treeai.com)
- Community: [TreeAi Discord](https://discord.gg/treeai)

---

**SwipeOS V4.1** - Revolutionizing card-based interfaces with gesture-driven interactions and secure database integration. 